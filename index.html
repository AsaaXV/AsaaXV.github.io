<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Showcase Font Pantai Losari</title> 
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Audio element for background music - autoplay, loop, and hidden with ID for JavaScript control -->
    <audio id="backgroundMusic" autoplay loop>
        <source src="audio/Bryant Barnes - I'd Rather Pretend.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>
    
    <!-- Video element for ghost video -->
    <div class="video-overlay" id="videoOverlay">
        <div class="video-container">
            <video id="ghostVideo" controls>
                <source src="video/VID-20250520-WA0490.mp4" type="video/mp4">
                Your browser does not support the video element.
            </video>
        </div>
        <button id="backButton" class="back-button">Kembali</button>
    </div>
    
    <!-- Music control button positioned at bottom right -->
    <div id="musicControl" class="music-control">
        <button id="playPauseButton" class="play-pause-button" aria-label="Play/Pause Music">
            <span id="playIcon" class="control-icon">‚ñ∂</span>
            <span id="pauseIcon" class="control-icon" style="display:none;">‚ùö‚ùö</span>
        </button>
    </div>
    
    <!-- Ghost-themed video button positioned next to music control -->
    <div id="videoControl" class="video-control">
        <button id="ghostButton" class="ghost-button" aria-label="Play Ghost Video">
            <span class="control-icon">üëª</span>
        </button>
    </div>
    
    <div class="frame-container">
        <div class="content-wrapper">
            <header>
                <h1>TYPEFACE<br>PANTAI LOSARI</h1> <!-- UPDATED TITLE TO TWO LINES -->
            </header>

            <main>
                <section class="font-preview">
                    <div class="preview-font-label">PREVIEW FONT</div> 
                    <div class="preview-box">
                        <p class="preview-text" id="previewText">The quick brown fox jumps over the lazy dog. 1234567890</p>
                        <textarea id="customText" placeholder="ketik teks anda di sini untuk preview"></textarea> 
                    </div>
                </section>

                <section class="font-download">
                    <a href="fonts/Prototipe2FontLosari-Regular.otf" download class="download-button">unduh font</a> 
                    <p class="instructions">Klik tombol di atas untuk mengunduh file font. Pastikan Anda telah menempatkan file font Anda (misalnya Prototipe2FontLosari-Regular.otf) di dalam folder 'fonts'.</p> 
                </section>
            </main>

            <footer>
                <p>Website Showcase Font</p>
            </footer>
        </div>
    </div>

    <script>
        // Font preview functionality
        const customTextInput = document.getElementById("customText");
        const previewTextDisplay = document.getElementById("previewText");
        const defaultPreview = "The quick brown fox jumps over the lazy dog. 1234567890";

        customTextInput.addEventListener("input", function() {
            if (this.value.trim() !== "") {
                previewTextDisplay.textContent = this.value;
            } else {
                previewTextDisplay.textContent = defaultPreview;
            }
        });

        // Music control functionality
        const backgroundMusic = document.getElementById("backgroundMusic");
        const playPauseButton = document.getElementById("playPauseButton");
        const playIcon = document.getElementById("playIcon");
        const pauseIcon = document.getElementById("pauseIcon");
        
        // Function to update button appearance based on play state
        function updatePlayPauseButton(isPlaying) {
            if (isPlaying) {
                playIcon.style.display = "none";
                pauseIcon.style.display = "inline-block";
            } else {
                playIcon.style.display = "inline-block";
                pauseIcon.style.display = "none";
            }
        }
        
        // Toggle play/pause when button is clicked
        playPauseButton.addEventListener("click", function() {
            if (backgroundMusic.paused) {
                // Try to play and handle any errors
                const playPromise = backgroundMusic.play();
                
                if (playPromise !== undefined) {
                    playPromise.then(_ => {
                        // Playback started successfully
                        updatePlayPauseButton(true);
                    })
                    .catch(error => {
                        // Auto-play was prevented
                        console.log("Playback was prevented:", error);
                        updatePlayPauseButton(false);
                    });
                }
            } else {
                backgroundMusic.pause();
                updatePlayPauseButton(false);
            }
        });
        
        // Check initial play state and handle autoplay restrictions
        document.addEventListener("DOMContentLoaded", function() {
            // Try autoplay first (this might be blocked by browser)
            const playPromise = backgroundMusic.play();
            
            if (playPromise !== undefined) {
                playPromise.then(_ => {
                    // Autoplay successful
                    updatePlayPauseButton(true);
                })
                .catch(error => {
                    // Autoplay prevented by browser
                    console.log("Autoplay prevented:", error);
                    updatePlayPauseButton(false);
                });
            }
        });
        
        // Also try to play on first user interaction with the page
        document.addEventListener("click", function firstInteraction() {
            if (backgroundMusic.paused) {
                backgroundMusic.play()
                    .then(() => {
                        updatePlayPauseButton(true);
                    })
                    .catch(error => {
                        console.log("Play on interaction failed:", error);
                    });
            }
            // Remove this listener after first interaction
            document.removeEventListener("click", firstInteraction);
        }, { once: true });
        
        // Update button state if audio ends
        backgroundMusic.addEventListener("ended", function() {
            updatePlayPauseButton(false);
        });
        
        // Update button state if audio plays
        backgroundMusic.addEventListener("play", function() {
            updatePlayPauseButton(true);
        });
        
        // Update button state if audio pauses
        backgroundMusic.addEventListener("pause", function() {
            updatePlayPauseButton(false);
        });
        
        // Video player functionality
        const videoOverlay = document.getElementById("videoOverlay");
        const ghostVideo = document.getElementById("ghostVideo");
        const ghostButton = document.getElementById("ghostButton");
        const backButton = document.getElementById("backButton");
        
        // Show video overlay when ghost button is clicked
        ghostButton.addEventListener("click", function() {
            videoOverlay.style.display = "flex";
            // Pause background music when video is shown
            backgroundMusic.pause();
            updatePlayPauseButton(false);
            // Play the video
            ghostVideo.play().catch(error => {
                console.log("Video play was prevented:", error);
            });
        });
        
        // Hide video overlay when back button is clicked
        backButton.addEventListener("click", function() {
            videoOverlay.style.display = "none";
            // Pause the video
            ghostVideo.pause();
            ghostVideo.currentTime = 0;
        });
        
        // Ensure video is paused when overlay is hidden
        ghostVideo.addEventListener("ended", function() {
            // Optional: automatically close overlay when video ends
            // videoOverlay.style.display = "none";
        });
    </script>
</body>
</html>
